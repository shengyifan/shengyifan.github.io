<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8" />
<title>æ—¥å†…ç“¦æ™¯ç‚¹åœ°å›¾ï¼ˆå«å®æ—¶å®šä½ï¼‰</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<style>
  #map { height: 100vh; width: 100%; }
  .locate-btn { font-size:18px; line-height:24px; text-align:center; width:34px; height:34px; cursor:pointer; background:#fff; }
</style>
</head>
<body>
<div id="map"></div>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
// åˆå§‹åŒ–åœ°å›¾
var map = L.map('map').setView([46.2044, 6.1432], 13);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  maxZoom: 19,
  attribution: '&copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> è´¡çŒ®è€…'
}).addTo(map);

// è‡ªå®šä¹‰çº¢è‰²å’Œè“è‰²å›¾æ ‡
var redIcon = new L.Icon({
    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png',
    shadowUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-shadow.png',
    iconSize: [25, 41],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
});
var blueIcon = new L.Icon({
    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-blue.png',
    shadowUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-shadow.png',
    iconSize: [25, 41],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
});

// ç»å…¸æ™¯ç‚¹ï¼ˆçº¢è‰²ï¼‰
var classics = [["æ—¥å†…ç“¦å¤§å–·æ³‰ Jet d'Eau", 46.2075, 6.155], ["åœ£çš®åŸƒå°”å¤§æ•™å ‚ St. Pierre Cathedral", 46.2009, 6.1486], ["å¸ƒå°”-å¾·-å¯Œå¹¿åœº & è€åŸåŒº Bourg-de-Four Square (Old Town)", 46.2003, 6.1476], ["è”åˆå›½ä¸‡å›½å®« Palais des Nations", 46.2266, 6.1403], ["ç™¾è¾¾ç¿¡ä¸½åšç‰©é¦† Patek Philippe Museum", 46.2009, 6.139], ["å®—æ•™æ”¹é©å¢™ Reformation Wall", 46.2008, 6.1472], ["è‹±å›½èŠ±å›­ & èŠ±é’Ÿ Jardin Anglais / Flower Clock", 46.2051, 6.1524], ["æ—¥å†…ç“¦è‰ºæœ¯ä¸å†å²åšç‰©é¦† MusÃ©e d'Art et d'Histoire", 46.1986, 6.1539], ["æ¬§æ´²æ ¸å­ç ”ç©¶ä¸­å¿ƒ CERN Globe", 46.2337, 6.055], ["æ—¥å†…ç“¦æ¤ç‰©å›­ Conservatory & Botanical Garden", 46.2236, 6.1483], ["è’™è¨å‹’ç“¦ç¼†è½¦ Mont-SalÃ¨ve Cable Car", 46.154, 6.2177], ["å¸ƒä¼¦ç‘å…‹çºªå¿µç¢‘ Brunswick Monument", 46.2095, 6.1478], ["å·´æ–¯è’‚æ˜‚å…¬å›­ Parc des Bastions", 46.2005, 6.1438], ["é˜¿é‡Œäºšçº³åšç‰©é¦† MusÃ©e Ariana", 46.2254, 6.1401], ["æ—¥å†…ç“¦æ¹–æ¸¸èˆ¹ç å¤´ CGN Pier Mont-Blanc", 46.209, 6.1537]];
classics.forEach(function(pt) {
    L.marker([pt[1], pt[2]], {icon: redIcon}).addTo(map).bindPopup(pt[0]);
});

// å°ä¼—æ™¯ç‚¹ï¼ˆè“è‰²ï¼‰
var hidden = [["åŒ…æ–¯å…¬å…±æµ´åœº Bains des PÃ¢quis", 46.2105, 6.1556], ["å¡é²æ—¥è€é•‡ Carouge Old Town", 46.1831, 6.1398], ["æ‹‰æ ¼å…°æ—¥å…¬å›­ Parc de la Grange", 46.2024, 6.1622], ["æ—¥å†…ç“¦æ°‘æ—å­¦åšç‰©é¦† MEG", 46.2021, 6.1389], ["å·´è’‚æ£®æ—å…¬å›­ Bois de la BÃ¢tie", 46.2145, 6.1231], ["è“ç²¾çµæ¥¼ â€” Grottes åŒº Schtroumpfs Buildings", 46.2114, 6.1424], ["é˜¿é‡Œäºšçº³å…¬å›­ Ariana Park (Gardens)", 46.2256, 6.14], ["ç§‘å­¦å²åšç‰©é¦† MusÃ©e d'Histoire des Sciences", 46.2237, 6.1489], ["å·´æ¯”è€¶-ç©†åŸƒå‹’åšç‰©é¦† Barbier-Mueller Museum", 46.201, 6.1482], ["ç»´å¸Œæ²³å²¸è‡ªç„¶ä¿æŠ¤åŒº Berges de Vessy", 46.1763, 6.1328], ["è¥¿å…‹åˆ©é¦† Pavillon Sicli", 46.1974, 6.1341], ["è¿ªå¥¥è¾¾è’‚åˆ«å¢… Villa Diodati", 46.2334, 6.1889], ["ä¿„ç½—æ–¯ä¸œæ­£æ•™å ‚ Russian Orthodox Church", 46.1982, 6.1556], ["æœ—é›„æ–¯ â€” ç½—çº³ä¸é˜¿å°”æ²ƒæ±‡æµå¤„ La Jonction", 46.1993, 6.1224], ["åšå¾·é»˜åŸºé‡‘ä¼šå›¾ä¹¦é¦† Fondation Martin Bodmer", 46.2217, 6.1907]];
hidden.forEach(function(pt) {
    L.marker([pt[1], pt[2]], {icon: blueIcon}).addTo(map).bindPopup(pt[0]);
});

// â€”â€” å®æ—¶å®šä½æŒ‰é’® â€”â€”
var locateControl = L.control({position:'topleft'});
locateControl.onAdd = function(map) {
    var div = L.DomUtil.create('div', 'leaflet-bar');
    div.innerHTML = '<div class="locate-btn" title="å®šä½åˆ°å½“å‰ä½ç½®">ğŸ“</div>';
    div.firstChild.onclick = function(e) {
        e.stopPropagation();
        map.locate({setView:true, maxZoom:16});
    };
    return div;
};
locateControl.addTo(map);

// å½“å‰ä½ç½®æ ‡è®° & é”™è¯¯å¤„ç†
map.on('locationfound', function(e) {
    L.circleMarker(e.latlng, {radius:8, weight:2, color:'#3388ff', fillOpacity:0.7}).addTo(map)
      .bindPopup('ä½ åœ¨è¿™é‡Œ').openPopup();
});
map.on('locationerror', function(e) {
    alert('å®šä½å¤±è´¥ï¼š' + e.message + '\nè¯·æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦å…è®¸è·å–ä½ç½®ä¿¡æ¯ã€‚');
});
</script>
</body>
</html>
